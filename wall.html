<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Warsztat – Wall</title>
<style>
:root {
--outline:#000;
--muted:#777;
--radius:14px;
--btn-bg:gold;
--btn-hover:#ffd700;
font-family: Arial, sans-serif;
}

*, *::before, *::after {
box-sizing: border-box;
}

body {
margin:0;
color:var(--outline);
background: url('tlo.jpg') no-repeat center center fixed;
background-size: cover;
}
body::after {
content:"";
position:fixed;
top:0; left:0; width:100%; height:100%;
background:rgba(255,255,255,0.7);
z-index:-1;
}

/* Górny pasek */
header {
background:#fff;
color:#000;
padding:12px 20px;
display:flex;
align-items:center;
justify-content:space-between;
position:sticky;
top:0;
border-bottom:2px solid var(--btn-bg);
}
header .logo {
display:flex;
align-items:center;
gap:10px;
font-weight:700;
font-size:18px;
}
header .logo img { height:32px; }
header nav button {
background:var(--btn-bg);
color:#000;
border:0;
padding:8px 14px;
border-radius:12px;
cursor:pointer;
font-weight:600;
font-size:14px;
}
header nav button:hover { background:var(--btn-hover); }

/* kontener walla */
main {
max-width:700px;
margin:20px auto;
padding:0 15px;
width:100%;
}

/* formularz nowego posta */
.new-post {
background:#fff;
padding:16px;
border-radius:var(--radius);
box-shadow:0 2px 8px rgba(0,0,0,0.1);
margin-bottom:20px;
width:100%;
}
.new-post textarea {
width:100%;
border:1px solid #ccc;
border-radius:var(--radius);
padding:12px;
font-size:14px;
resize:vertical;
}
.new-post button {
margin-top:10px;
padding:10px 16px;
border:0;
border-radius:var(--radius);
background:var(--btn-bg);
color:#000;
font-weight:600;
font-size:14px;
cursor:pointer;
}
.new-post button:hover { background:var(--btn-hover); }

/* post */
.post {
background:#fff;
padding:16px;
border-radius:var(--radius);
box-shadow:0 2px 8px rgba(0,0,0,0.1);
margin-bottom:20px;
width:100%;
}
.post-header {
display:flex;
align-items:center;
gap:10px;
margin-bottom:10px;
}
.post-header img {
width:40px;
height:40px;
border-radius:50%;
object-fit:cover;
}
.post-header .author { font-weight:700; }
.post-content { font-size:14px; line-height:1.4; margin:10px 0; }
.post-footer {
font-size:14px;
color:var(--muted);
display:flex;
justify-content:flex-start;
gap:15px;
margin-bottom:10px;
}
.post-footer button {
border:0;
background:none;
color:var(--outline);
cursor:pointer;
font-size:14px;
font-weight:600;
}

/* komentarze */
.comments { border-top:1px solid #eee; padding-top:10px; }
.comment {
display:flex;
align-items:flex-start;
gap:10px;
margin-bottom:12px;
width:100%;
}
.comment img {
width:32px;
height:32px;
border-radius:50%;
object-fit:cover;
}
.comment .text {
background:#f5f5f5;
padding:8px 12px;
border-radius:var(--radius);
font-size:13px;
width:100%;
word-break: break-word;
}
.add-comment {
display:flex;
align-items:center;
gap:8px;
margin-top:10px;
width:100%;
}
.add-comment input {
flex:1;
padding:8px;
border-radius:var(--radius);
border:1px solid #ccc;
font-size:13px;
}
.add-comment button {
padding:8px 14px;
border:0;
border-radius:var(--radius);
background:var(--btn-bg);
color:#000;
font-size:14px;
font-weight:600;
cursor:pointer;
}
.add-comment button:hover { background:var(--btn-hover); }

/* responsywność */
@media(max-width:600px){
header {
padding:10px 15px;
}
header .logo span { font-size:16px; }
header nav button {
padding:6px 10px;
font-size:13px;
}
main {
margin:10px auto;
padding:0 10px;
}
.post-header img { width:32px; height:32px; }
.post-content { font-size:13px; }
.comment img { width:26px; height:26px; }
.comment .text { font-size:12px; }
.add-comment input { font-size:12px; padding:6px; }
.add-comment button { font-size:13px; padding:6px 10px; }
}
</style>
</head>
<body>

<header>
<div class="logo">
<img src="logo.png" alt="Logo Warsztat">
<span>WARSZTAT</span>
</div>
<nav>
<button id="logoutBtn">Wyloguj</button>
</nav>
</header>

<main>
<!-- formularz nowego posta -->
<div class="new-post">
<textarea id="newPostContent" rows="3" placeholder="Co masz na warsztacie?"></textarea>
<button id="publishBtn">Opublikuj</button>
</div>

<!-- kontener postów -->
<div id="postsContainer"></div>
</main>

<script>
// Pobierz dane użytkownika
const nick = localStorage.getItem('nick') || 'Anonim';
const avatar = localStorage.getItem('avatar') || 'avatars/default.png';
const postsContainer = document.getElementById('postsContainer');
const publishBtn = document.getElementById('publishBtn');
const newPostContent = document.getElementById('newPostContent');

// Renderowanie postu
function renderPost(post){
const div = document.createElement('div');
div.className = 'post';
div.id = post.id;
div.innerHTML = `
<div class="post-header">
<img src="${post.avatar}" alt="Avatar">
<div>
<div class="author">${post.author}</div>
<div class="time">Teraz</div>
</div>
</div>
<div class="post-content">${linkify(hashtagify(post.content))}</div>
<div class="post-footer">
<button onclick="reactPost('${post.id}','??')">??</button>
<button onclick="editPost('${post.id}')">?? Edytuj</button>
</div>
<div class="comments" id="comments-${post.id}">
<div class="add-comment">
<input type="text" placeholder="Napisz komentarz..." id="commentInput-${post.id}">
<button onclick="addComment('${post.id}')">Wyślij</button>
</div>
</div>
`;
postsContainer.prepend(div);
}

// Ładowanie postów
let posts = JSON.parse(localStorage.getItem('posts') || '[]');
posts.forEach(p => renderPost(p));

// Publikowanie
publishBtn.addEventListener('click', ()=>{
if(!newPostContent.value) return;
const post = {
id: Date.now().toString(),
author: nick,
avatar: avatar,
content: newPostContent.value,
comments: []
};
posts.push(post);
localStorage.setItem('posts', JSON.stringify(posts));
renderPost(post);
newPostContent.value = '';
});

// Dodawanie komentarzy
function addComment(postId){
const input = document.getElementById(`commentInput-${postId}`);
if(!input.value) return;
const post = posts.find(p=>p.id===postId);
const comment = {author:nick, avatar:avatar, text: input.value};
post.comments.push(comment);
localStorage.setItem('posts', JSON.stringify(posts));

const commentsDiv = document.getElementById(`comments-${postId}`);
const div = document.createElement('div');
div.className='comment';
div.innerHTML = `<img src="${avatar}" alt="Avatar"><div class="text"><b>${nick}:</b> ${linkify(hashtagify(input.value))}</div>`;
commentsDiv.insertBefore(div, commentsDiv.querySelector('.add-comment'));
input.value='';
}

// Edycja postu
function editPost(postId){
const post = posts.find(p=>p.id===postId);
const newText = prompt('Edytuj post:', post.content);
if(newText!==null){
post.content=newText;
localStorage.setItem('posts', JSON.stringify(posts));
document.getElementById(postId).querySelector('.post-content').innerHTML = linkify(hashtagify(newText));
}
}

// Reakcja
function reactPost(postId, emoji){
alert(`Reakcja ${emoji} dodana!`);
}

// Funkcje pomocnicze
function linkify(text){
return text.replace(/(https?:\/\/[^\s]+)/g,'<a href="$1" target="_blank">$1</a>');
}
function hashtagify(text){
return text.replace(/#(\w+)/g,'<a href="#">#$1</a>');
}

// Wylogowanie
document.getElementById('logoutBtn').addEventListener('click', ()=>{
localStorage.clear();
window.location.href='index.html';
});
</script>
</body>
</html>